{"version":3,"file":"SearchBar.stories-7049036d.js","sources":["../../src/components/SearchBar.vue"],"sourcesContent":["<template>\n  <div\n    id=\"search-bar__wrapper\"\n    class=\"search-bar__wrapper\"\n    data-e2e=\"global-search-input-wrapper\"\n  >\n    <div class=\"search-bar__width\">{{ displayContent }}</div>\n    <Dropdown :trigger=\"['click']\">\n      <Input\n        id=\"search-bar\"\n        v-model:value=\"searchContent\"\n        :placeholder=\"placeholder\"\n        allow-clear\n        autocomplete=\"off\"\n        data-e2e=\"global-search-input\"\n        @pressEnter=\"searchBarEnter\"\n        @change=\"searchBarChange\"\n      >\n        <template #suffix>\n          <SearchOutlined v-if=\"searchContent.length < 1\" :style=\"{ color: '#9c9c9c' }\" />\n        </template>\n      </Input>\n      <template #overlay>\n        <Menu\n          v-if=\"searchHistoryInner?.length !== 0\"\n          data-e2e=\"global-search-list\"\n          @click=\"clickMenu\"\n        >\n          <MenuItem\n            v-for=\"(item, index) in searchHistoryInner\"\n            :key=\"index\"\n            :value=\"item\"\n            data-e2e=\"global-search-list-item\"\n          >\n            {{ item }}\n          </MenuItem>\n        </Menu>\n      </template>\n    </Dropdown>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, ref, PropType, watch, computed, onMounted, onUpdated } from 'vue';\nimport { Input, Dropdown, Menu, MenuProps } from 'ant-design-vue';\nimport { SearchOutlined } from '@ant-design/icons-vue';\nimport { SearchBarTargetType, SearchBarDropdownType } from './interface';\n\nexport default defineComponent({\n  components: { Input, SearchOutlined, Dropdown, Menu, MenuItem: Menu.Item },\n  props: {\n    placeholder: {\n      default: 'Search on server list',\n      type: String,\n    },\n    searchHistory: {\n      type: Array as PropType<string[]>,\n      default: () => [],\n    },\n    defaultValue: {\n      type: String,\n      default: '',\n    },\n    maxWidth: {\n      type: Number,\n      default: 362,\n    },\n    minWidth: {\n      type: Number,\n      default: 192,\n    },\n  },\n  emits: ['searchBarEnter', 'searchBarChange', 'clickSearchbarMenu'],\n  setup(props, { emit }) {\n    const searchContent = ref<string>(props.defaultValue || '');\n    const searchHistoryInner = ref(props.searchHistory);\n    function searchBarEnter(e: Event) {\n      emit('searchBarEnter', (e.target as HTMLInputElement).value);\n    }\n    function setInputWidth() {\n      const inputDisplay = document.getElementById('search-bar');\n      const spanDisplay = document.querySelector('.search-bar__width');\n      const maxWidthNoPadding = props.maxWidth - 48;\n      const minWidthNoPadding = props.minWidth - 48;\n      if (inputDisplay && spanDisplay) {\n        const spanDisplayWidth = spanDisplay.clientWidth;\n        if (searchContent.value.length === 0) {\n          inputDisplay.style.width = `${minWidthNoPadding - 14}px`;\n        } else if (spanDisplayWidth > minWidthNoPadding && spanDisplayWidth < maxWidthNoPadding) {\n          inputDisplay.style.width = `${spanDisplay.clientWidth}px`;\n        } else if (spanDisplayWidth > maxWidthNoPadding) inputDisplay.style.width = `${maxWidthNoPadding}px`;\n        else if (spanDisplayWidth < minWidthNoPadding) inputDisplay.style.width = `${minWidthNoPadding}px`;\n      }\n    }\n    function searchBarChange(e: Event) {\n      emit('searchBarChange', (e.target as HTMLInputElement).value);\n    }\n    const clickMenu: MenuProps['onClick'] = ({ item }) => {\n      emit('clickSearchbarMenu', item.value);\n      searchContent.value = item.value;\n    }\n    const displayContent = computed(() => {\n      if (searchContent.value.length === 0) return props.placeholder;\n      return searchContent.value;\n    });\n    watch(\n      () => props.searchHistory,\n      (n) => {\n        searchHistoryInner.value = n;\n      },\n    );\n    watch(\n      () => props.defaultValue,\n      (n) => {\n        if (n && n.length > 0) searchContent.value = n;\n      },\n    );\n    onMounted(() => {\n      setInputWidth();\n    });\n    onUpdated(() => {\n      setInputWidth();\n    });\n\n    return {\n      searchContent,\n      searchHistoryInner,\n      setInputWidth,\n      displayContent,\n      clickMenu,\n      searchBarEnter,\n      searchBarChange,\n    };\n  },\n});\n</script>\n<style lang=\"scss\" scoped>\n:deep(.ant-dropdown-menu-item) {\n  &:hover {\n    background-color: $dropdown-hover-bg;\n  }\n}\n.search-bar {\n  &__wrapper {\n    position: relative;\n    width: fit-content;\n  }\n  &__width {\n    background-color: blanchedalmond;\n    width: fit-content;\n    max-width: 370px;\n    height: 32px;\n    overflow: scroll;\n    visibility: hidden;\n    position: absolute;\n    left: 0;\n    top: 0;\n  }\n}\n</style>\n"],"names":["_sfc_main","defineComponent","Input","SearchOutlined","Dropdown","Menu","props","emit","searchContent","ref","searchHistoryInner","searchBarEnter","setInputWidth","inputDisplay","spanDisplay","maxWidthNoPadding","minWidthNoPadding","spanDisplayWidth","searchBarChange","clickMenu","item","displayContent","computed","watch","n","onMounted","onUpdated","_hoisted_1","_component_Dropdown","_resolveComponent","_openBlock","_createElementBlock","_createElementVNode","_hoisted_2","_toDisplayString","_ctx","_createVNode","_withCtx","_a","_createBlock","_component_Menu","_Fragment","_renderList","index","_component_MenuItem","_createCommentVNode","_component_Input","_cache","$event","_component_SearchOutlined"],"mappings":"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"}