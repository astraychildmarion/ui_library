import{e as N,y as S,P as U,a as B,F as q,B as G}from"./_plugin-vue_export-helper-153ef977.js";import{d as I,a as E,L as V,o as X,w as Y,p as F,q as K,m as J,G as Q}from"./vue.esm-bundler-d3349c08.js";import{w as O,P as Z}from"./Portal-ea39a9a5.js";import{_ as ee,a as te}from"./classCallCheck-9c346e64.js";var L;function A(u){if(typeof document>"u")return 0;if(u||L===void 0){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),e=n.style;e.position="absolute",e.top="0",e.left="0",e.pointerEvents="none",e.visibility="hidden",e.width="200px",e.height="150px",e.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var o=t.offsetWidth;n.style.overflow="scroll";var r=t.offsetWidth;o===r&&(r=n.clientWidth),document.body.removeChild(n),L=o-r}return L}function C(u){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.element,e=n===void 0?document.body:n,o={},r=Object.keys(u);return r.forEach(function(c){o[c]=e.style[c]}),r.forEach(function(c){e.style[c]=u[c]}),o}function ne(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var P={};const H=function(u){if(!(!ne()&&!u)){var t="ant-scrolling-effect",n=new RegExp("".concat(t),"g"),e=document.body.className;if(u){if(!n.test(e))return;C(P),P={},document.body.className=e.replace(n,"").trim();return}var o=A();if(o&&(P=C({position:"relative",width:"calc(100% - ".concat(o,"px)")}),!n.test(e))){var r="".concat(e," ").concat(t);document.body.className=r.trim()}}};var f=[],M="ant-scrolling-effect",T=new RegExp("".concat(M),"g"),oe=0,$=new Map,re=ee(function u(t){var n=this;te(this,u),N(this,"getContainer",function(){var e;return(e=n.options)===null||e===void 0?void 0:e.container}),N(this,"reLock",function(e){var o=f.find(function(r){var c=r.target;return c===n.lockTarget});o&&n.unLock(),n.options=e,o&&(o.options=e,n.lock())}),N(this,"lock",function(){var e;if(!f.some(function(i){var a=i.target;return a===n.lockTarget})){if(f.some(function(i){var a,m=i.options;return(m==null?void 0:m.container)===((a=n.options)===null||a===void 0?void 0:a.container)})){f=[].concat(S(f),[{target:n.lockTarget,options:n.options}]);return}var o=0,r=((e=n.options)===null||e===void 0?void 0:e.container)||document.body;(r===document.body&&window.innerWidth-document.documentElement.clientWidth>0||r.scrollHeight>r.clientHeight)&&(o=A());var c=r.className;if(f.filter(function(i){var a,m=i.options;return(m==null?void 0:m.container)===((a=n.options)===null||a===void 0?void 0:a.container)}).length===0&&$.set(r,C({width:o!==0?"calc(100% - ".concat(o,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:r})),!T.test(c)){var d="".concat(c," ").concat(M);r.className=d.trim()}f=[].concat(S(f),[{target:n.lockTarget,options:n.options}])}}),N(this,"unLock",function(){var e,o=f.find(function(d){var i=d.target;return i===n.lockTarget});if(f=f.filter(function(d){var i=d.target;return i!==n.lockTarget}),!(!o||f.some(function(d){var i,a=d.options;return(a==null?void 0:a.container)===((i=o.options)===null||i===void 0?void 0:i.container)}))){var r=((e=n.options)===null||e===void 0?void 0:e.container)||document.body,c=r.className;T.test(c)&&(C($.get(r),{element:r}),$.delete(r),r.className=r.className.replace(T,"").trim())}}),this.lockTarget=oe++,this.options=t}),g=0,w=q(),k={},h=function(t){if(!w)return null;if(t){if(typeof t=="string")return document.querySelectorAll(t)[0];if(typeof t=="function")return t();if(G(t)==="object"&&t instanceof window.HTMLElement)return t}return document.body};const se=I({compatConfig:{MODE:3},name:"PortalWrapper",inheritAttrs:!1,props:{wrapperClassName:String,forceRender:{type:Boolean,default:void 0},getContainer:U.any,visible:{type:Boolean,default:void 0}},setup:function(t,n){var e=n.slots,o=E(),r=E(),c=E(),d=new re({container:h(t.getContainer)}),i=function(){var l,v;(l=o.value)===null||l===void 0||(v=l.parentNode)===null||v===void 0||v.removeChild(o.value)},a=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(l||o.value&&!o.value.parentNode){var v=h(t.getContainer);return v?(v.appendChild(o.value),!0):!1}return!0},m=function(){return w?(o.value||(o.value=document.createElement("div"),a(!0)),W(),o.value):null},W=function(){var l=t.wrapperClassName;o.value&&l&&l!==o.value.className&&(o.value.className=l)};V(function(){W(),a()});var j=function(){g===1&&!Object.keys(k).length?(H(),k=C({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"})):g||(C(k),k={},H(!0))},z=Q();return X(function(){var s=!1;Y([function(){return t.visible},function(){return t.getContainer}],function(l,v){var b=B(l,2),y=b[0],p=b[1],x=B(v,2),R=x[0],_=x[1];if(w&&h(t.getContainer)===document.body&&(y&&!R?g+=1:s&&(g-=1)),s){var D=typeof p=="function"&&typeof _=="function";(D?p.toString()!==_.toString():p!==_)&&i(),y&&y!==R&&w&&h(p)!==d.getContainer()&&d.reLock({container:h(p)})}s=!0},{immediate:!0,flush:"post"}),F(function(){a()||(c.value=O(function(){z.update()}))})}),K(function(){var s=t.visible,l=t.getContainer;w&&h(l)===document.body&&(g=s&&g?g-1:g),i(),O.cancel(c.value)}),function(){var s=t.forceRender,l=t.visible,v=null,b={getOpenCount:function(){return g},getContainer:m,switchScrollingEffect:j,scrollLocker:d};return(s||l||r.value)&&(v=J(Z,{getContainer:m,ref:r},{default:function(){var p;return(p=e.default)===null||p===void 0?void 0:p.call(e,b)}})),v}}});export{se as P,A as g};
//# sourceMappingURL=PortalWrapper-4f08021a.js.map
