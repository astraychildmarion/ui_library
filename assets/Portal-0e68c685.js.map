{"version":3,"file":"Portal-0e68c685.js","sources":["../../node_modules/ant-design-vue/es/_util/raf.js","../../node_modules/ant-design-vue/es/_util/supportsPassive.js","../../node_modules/ant-design-vue/es/vc-util/Dom/addEventListener.js","../../node_modules/ant-design-vue/es/vc-util/Dom/contains.js","../../node_modules/ant-design-vue/es/vc-trigger/context.js","../../node_modules/ant-design-vue/es/_util/Portal.js"],"sourcesContent":["var raf = function raf(callback) {\n  return setTimeout(callback, 16);\n};\nvar caf = function caf(num) {\n  return clearTimeout(num);\n};\nif (typeof window !== 'undefined' && 'requestAnimationFrame' in window) {\n  raf = function raf(callback) {\n    return window.requestAnimationFrame(callback);\n  };\n  caf = function caf(handle) {\n    return window.cancelAnimationFrame(handle);\n  };\n}\nvar rafUUID = 0;\nvar rafIds = new Map();\nfunction cleanup(id) {\n  rafIds.delete(id);\n}\nexport default function wrapperRaf(callback) {\n  var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  rafUUID += 1;\n  var id = rafUUID;\n  function callRef(leftTimes) {\n    if (leftTimes === 0) {\n      // Clean up\n      cleanup(id);\n      // Trigger\n      callback();\n    } else {\n      // Next raf\n      var realId = raf(function () {\n        callRef(leftTimes - 1);\n      });\n      // Bind real raf id\n      rafIds.set(id, realId);\n    }\n  }\n  callRef(times);\n  return id;\n}\nwrapperRaf.cancel = function (id) {\n  var realId = rafIds.get(id);\n  cleanup(realId);\n  return caf(realId);\n};","// Test via a getter in the options object to see if the passive property is accessed\nvar supportsPassive = false;\ntry {\n  var opts = Object.defineProperty({}, 'passive', {\n    get: function get() {\n      supportsPassive = true;\n    }\n  });\n  window.addEventListener('testPassive', null, opts);\n  window.removeEventListener('testPassive', null, opts);\n} catch (e) {}\nexport default supportsPassive;","import supportsPassive from '../../_util/supportsPassive';\nexport default function addEventListenerWrap(target, eventType, cb, option) {\n  if (target && target.addEventListener) {\n    var opt = option;\n    if (opt === undefined && supportsPassive && (eventType === 'touchstart' || eventType === 'touchmove' || eventType === 'wheel')) {\n      opt = {\n        passive: false\n      };\n    }\n    target.addEventListener(eventType, cb, opt);\n  }\n  return {\n    remove: function remove() {\n      if (target && target.removeEventListener) {\n        target.removeEventListener(eventType, cb);\n      }\n    }\n  };\n}","export default function contains(root, n) {\n  if (!root) {\n    return false;\n  }\n  return root.contains(n);\n}","import { computed, inject, provide } from 'vue';\nvar TriggerContextKey = Symbol('TriggerContextKey');\nexport var useProviderTrigger = function useProviderTrigger() {\n  var portal = null;\n  provide(TriggerContextKey, {\n    setPortal: function setPortal(val) {\n      portal = val;\n    },\n    popPortal: true\n  });\n  return function () {\n    return portal;\n  };\n};\nexport var useInjectTrigger = function useInjectTrigger(tryPopPortal) {\n  return tryPopPortal ? inject(TriggerContextKey, {\n    setPortal: function setPortal() {},\n    popPortal: false\n  }) : {\n    setPortal: function setPortal() {},\n    popPortal: false\n  };\n};\nvar PortalContextKey = Symbol('PortalContextKey');\nexport var useProvidePortal = function useProvidePortal(instance) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    inTriggerContext: true\n  };\n  provide(PortalContextKey, {\n    inTriggerContext: config.inTriggerContext,\n    shouldRender: computed(function () {\n      var _ref = instance || {},\n        sPopupVisible = _ref.sPopupVisible,\n        popupRef = _ref.popupRef,\n        forceRender = _ref.forceRender,\n        autoDestroy = _ref.autoDestroy;\n      // if (popPortal) return true;\n      var shouldRender = false;\n      if (sPopupVisible || popupRef || forceRender) {\n        shouldRender = true;\n      }\n      if (!sPopupVisible && autoDestroy) {\n        shouldRender = false;\n      }\n      return shouldRender;\n    })\n  });\n};\nexport var useInjectPortal = function useInjectPortal() {\n  useProvidePortal({}, {\n    inTriggerContext: false\n  });\n  var portalContext = inject(PortalContextKey, {\n    shouldRender: computed(function () {\n      return false;\n    }),\n    inTriggerContext: false\n  });\n  return {\n    shouldRender: computed(function () {\n      return portalContext.shouldRender.value || portalContext.inTriggerContext === false;\n    })\n  };\n};","import { createVNode as _createVNode, resolveDirective as _resolveDirective } from \"vue\";\nimport PropTypes from './vue-types';\nimport { defineComponent, nextTick, onBeforeMount, onBeforeUnmount, onUpdated, Teleport, watch } from 'vue';\nimport { useInjectPortal } from '../vc-trigger/context';\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'Portal',\n  inheritAttrs: false,\n  props: {\n    getContainer: PropTypes.func.isRequired,\n    didUpdate: Function\n  },\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots;\n    var isSSR = true;\n    // getContainer 不会改变，不用响应式\n    var container;\n    var _useInjectPortal = useInjectPortal(),\n      shouldRender = _useInjectPortal.shouldRender;\n    onBeforeMount(function () {\n      isSSR = false;\n      if (shouldRender.value) {\n        container = props.getContainer();\n      }\n    });\n    var stopWatch = watch(shouldRender, function () {\n      if (shouldRender.value && !container) {\n        container = props.getContainer();\n      }\n      if (container) {\n        stopWatch();\n      }\n    });\n    onUpdated(function () {\n      nextTick(function () {\n        if (shouldRender.value) {\n          var _props$didUpdate;\n          (_props$didUpdate = props.didUpdate) === null || _props$didUpdate === void 0 ? void 0 : _props$didUpdate.call(props, props);\n        }\n      });\n    });\n    onBeforeUnmount(function () {\n      if (container && container.parentNode) {\n        container.parentNode.removeChild(container);\n      }\n    });\n    return function () {\n      if (!shouldRender.value) return null;\n      if (isSSR) {\n        var _slots$default;\n        return (_slots$default = slots.default) === null || _slots$default === void 0 ? void 0 : _slots$default.call(slots);\n      }\n      return container ? _createVNode(Teleport, {\n        \"to\": container\n      }, slots) : null;\n    };\n  }\n});"],"names":["raf","callback","caf","num","handle","rafUUID","rafIds","cleanup","id","wrapperRaf","times","callRef","leftTimes","realId","supportsPassive","opts","supportsPassive$1","addEventListenerWrap","target","eventType","cb","option","opt","contains","root","n","TriggerContextKey","useProviderTrigger","portal","provide","val","useInjectTrigger","tryPopPortal","inject","PortalContextKey","useProvidePortal","instance","config","computed","_ref","sPopupVisible","popupRef","forceRender","autoDestroy","shouldRender","useInjectPortal","portalContext","Portal","defineComponent","PropTypes","props","slots","isSSR","container","_useInjectPortal","onBeforeMount","stopWatch","watch","onUpdated","nextTick","_props$didUpdate","onBeforeUnmount","_slots$default","_createVNode","Teleport"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}